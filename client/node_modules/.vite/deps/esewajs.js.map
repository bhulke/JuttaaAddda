{
  "version": 3,
  "sources": ["browser-external:crypto", "../../esewajs/index.js"],
  "sourcesContent": ["module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"crypto\" has been externalized for browser compatibility. Cannot access \"crypto.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "\r\nimport axios from \"axios\";\r\n\r\nimport crypto from \"crypto\"\r\n\r\nfunction generateHmacSha256Hash(data, secret,algorithm,encoding) {\r\n    if (!data || !secret) {\r\n      throw new Error(\"Both data and secret are required to generate a hash.\");\r\n    }\r\n  \r\n    // Create HMAC SHA256 hash and encode it in Base64\r\n    const hash = crypto\r\n      .createHmac(algorithm, secret)\r\n      .update(data)\r\n      .digest(encoding);\r\n  \r\n    return hash;\r\n  }\r\n\r\nfunction safeStringify(obj) {\r\n    const cache = new Set();\r\n    const jsonString = JSON.stringify(obj, (key, value) => {\r\n      if (typeof value === \"object\" && value !== null) {\r\n        if (cache.has(value)) {\r\n          return; // Discard circular reference\r\n        }\r\n        cache.add(value);\r\n      }\r\n      return value;\r\n    });\r\n    return jsonString;\r\n  }\r\nconst   EsewaPaymentGateway=async(amount,productDeliveryCharge,productServiceCharge,taxAmount,transaction_uuid,\r\n  product_code,SECRET,success_url,failure_url,ESEWAPAYMENT_URL,algorithm=\"sha256\",encoding=\"base64\")=>{\r\n    let paymentData = {\r\n      amount,\r\n      failure_url,\r\n      product_delivery_charge:productDeliveryCharge,\r\n      product_service_charge:productServiceCharge,\r\n      product_code ,\r\n      signed_field_names: \"total_amount,transaction_uuid,product_code\",\r\n      success_url,\r\n      tax_amount:taxAmount,\r\n      total_amount: Number(amount)+productDeliveryCharge+productServiceCharge+taxAmount,\r\n      transaction_uuid,\r\n    };\r\n    const data = `total_amount=${paymentData.total_amount},transaction_uuid=${paymentData.transaction_uuid},product_code=${paymentData.product_code}`;\r\n  \r\n  \r\n    const signature = generateHmacSha256Hash(data, SECRET,algorithm,encoding);\r\n    paymentData = { ...paymentData, signature };\r\n  \r\n    try {\r\n      const payment = await axios.post(ESEWAPAYMENT_URL, null, {\r\n        params: paymentData,\r\n      });\r\n     if(!payment){\r\n        return res.json({status:400,messege:\"failed payment\"})\r\n     }\r\n      const reqPayment = JSON.parse(safeStringify(payment));\r\n  \r\n  return reqPayment;\r\n  \r\n     } catch (error) {\r\n        console.log(error)\r\n      return res.status(400).json(\"error seding data\")\r\n  \r\n  \r\n\r\n      }\r\n  \r\n  \r\n  }\r\n\r\n\r\nconst EsewaCheckStatus=async(total_amount,transaction_uuid,product_code,ESEWAPAYMENT_STATUS_CHECK_URL)=>{\r\n    const paymentData = {\r\n      product_code,\r\n      total_amount,\r\n      transaction_uuid,\r\n    };\r\n    const response = await axios.get(\r\n      ESEWAPAYMENT_STATUS_CHECK_URL,\r\n      {\r\n        params: paymentData,\r\n      }\r\n    );\r\n    if(!response){\r\n      return res.json({status:400,success:false,message:\"error getting response \"})\r\n    }\r\n    const paymentStatusCheck = JSON.parse(safeStringify(response));\r\n    return paymentStatusCheck;\r\n  }\r\n\r\n\r\n\r\nfunction base64Decode(base64) {\r\n    // Convert Base64Url to standard Base64\r\n    const standardBase64 = base64.replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n    // Decode Base64 to UTF-8 string\r\n    const decoded = atob(standardBase64);\r\n    return JSON.parse(decoded);\r\n  }\r\n   function generateUniqueId() {\r\n    return `id-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n  }\r\n  export {EsewaPaymentGateway,EsewaCheckStatus,base64Decode,generateUniqueId} "],
  "mappings": "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",
  "names": ["crypto"]
}
